## Создание сценария Ansible реализующего:

###1. Установку сервера LDAP на ОС Ubuntu lts
###2. Установку пароля администратора на сервере LDAP
###3. Создание домена и директории организации
###4. Добавление двух групп в стуктуру организации
###5. Добавление пользователей в группы

* Исходный хост: Linux Mint 21.1 Vera
* Целевой хост: Ubuntu 14.04.6 LTS
* Использована инфраструктура Vagrant/DOSBox


Использованы переменные:

* domain: example.com (Наименование  домена)
* dn_domain: dc=example,dc=com (DN домена)
* root_directory: Organization (Наименование корневой директории)
* superuser_login: admin (Учетная запись администратора ддомена)
* superuser_passwd: adminpasswd (Пароль учетной записи администратора домена)

Значения перменных определены в файлах:

* vars/all.yml
* vars/secrets.yml


## 1. Устанавливаем сервис LDAP

Использованы команды и атрибуты: 

* package - универсальный модуль для установки пакетов
* become - эскалация привилегий

## 2. Устанавливаем модуль python-ldap
## 3. Генерируем хэш пароля суперпользователя 

Использованы команды и атрибуты: 

* raw - выполнение команды на целевом хосте без дополнительных обработок
* register - запись результата работы модуля raw в переменную с произвольным именем

## 4. Просматриваем сгенерированный хэш пароля супераользователя

Использованы команды и атрибуты: 

* debug - отображение информации (значения переменной) на стандартный поток вывода

## 5. Импортируем необходимый набор схем данных

Использованы команды и атрибуты:

* failed_when - условия управления задачами (игнорирование ошибки)

## 6. Определяем корневую запись DIT (Directory Information Tree) cn=config
    
Использованы команды и атрибуты:

* ldap_entry - добавление или удаление записи LDAP
* DN (distinguished name) - имя, уникальным образом идентифицирующее каждую запись каталога
* ObjectClass — группировка связанных атрибутов объекта
* attributes - описание атрибутов объекта
* olcDatabase - запись настроек DIT
* olcRootDN - атрибут определяет DN администратора для данного DIT
* olcRootPW - атрибут определяет пароль администратора DIT, описываемого в данном разделе database
* olcAccess - атрибут определения списка контроля доступа (Access Control List, ACL)

## 7. Задаём служебную базу данных конфигурации cn=config
## 8. Подключаем необходимые динамические модули

Использованы команды и атрибуты:

* copy - модуль используется для копирования файла с локального/удаленного устройства 
* dest - указывает путь для копирования файла
* content - устанавливает содержимое файла

## 9. Добавляем конфигурацию пользовательской базы данных 

Использованы команды и атрибуты:

* OlcDbMaxSize - атрибут определяет максимальный размер базы данных  (в байтах)
* olcSuffix - указание на домен, для которого необходимо предоставить информацию
* olcDbDirectory - определение директории базы  данных
* olcDbIndex - директива определяет индексирование, которое будет применяться к указанным атрибутам
 
## 10. Создаем домен

Использованы команды и атрибуты:

*  bind_dn  -  DN пользователя, используемого для подключения к серверу LDAP
*  bind_pw - пароль пользователя, используемого для подключения к серверу LDAP

## 11. Создаем корневую директорию организации
## 12. Создаем директории пользователей
## 13. Создаем учетные записи пользователей

Использованы команды и атрибуты: 

* uid - (user ID) атрибут аккаунта с указанием имени пользователя (POSIX)
* cn - (Common Name) учетная запись пользователя (LDAP) 
* sn - (Surname) атрибут фамилии пользователя
* userPassword - пароль учетнной записи пользователя

## 14. Создаем директорию пользователей 
## 15. Создаем директорию подразделения (Департамент)
## 15. Создаем группу Admins в директории подразделения 

Использованы команды и атрибуты: 

* gidNumber - числовой идентификатор группы (POSIX)

## 16. Создаем группу Operators в директории подразделения 
## 17. Включаем пользователя Ivanov в группу Admins в подразделении Department

Использованы команды и атрибуты: 

* memberUid - текстовые имена учётных записей пользователей (POSIX)



